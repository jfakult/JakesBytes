icon: &icon
  font: "HackNerdFont:pixelsize=28"

# fonts we'll be re-using here and there
awesome: &awesome HackNerdFont:style=solid:pixelsize=14
awesome_brands: &awesome_brands HackNerdFont:pixelsize=16

std_underline: &std_underline {underline: { size: 2, color: FFFFCCFF}}

bar:
  location: bottom
  height: 44
  font: hack:size=28
  foreground: FFFFCCFF
  background: 113333FF
  spacing: 20

  left:
    - i3:
        anchors: # Not used (directly) by f00bar; used here to avoid duplication
          - string: &i3_common {margin: 5, on-click: "swaymsg --quiet workspace {name}"}
          - string: &default {<<: *i3_common, text: "{name}"}
          - string: &main    {<<: *i3_common, text: , font: *awesome}
          - string: &surfing {<<: *i3_common, text: , font: *awesome_brands}
          - string: &misc    {<<: *i3_common, text: , font: *awesome}
          - string: &mail    {<<: *i3_common, text: , font: *awesome}
          - string: &music   {<<: *i3_common, text: , font: *awesome}
          - focused: &focused
              deco: {stack: [background: {color: ffa0a04c}, <<: *std_underline]}
          - invisible: &invisible {foreground: ffffff55}
          - urgent: &urgent
              foreground: 000000ff
              deco: {stack: [background: {color: bc2b3fff}, <<: *std_underline]}
          - map: &i3_mode
              default:
                - string:
                    margin: 5
                    text: "{mode}"
                    deco: {background: {color: cc421dff}}
                - empty: {right-margin: 7}
              conditions:
                mode == default: {empty: {}}
        content:
          "":
            map:
              conditions:
                state == focused:   {string: {<<: [*default, *focused]}}
                state == unfocused: {string: {<<: *default}}
                state == invisible: {string: {<<: [*default, *invisible]}}
                state == urgent:    {string: {<<: [*default, *urgent]}}
          main:
            map:
              conditions:
                state == focused:   {string: {<<: [*main, *focused]}}
                state == unfocused: {string: {<<: *main}}
                state == invisible: {string: {<<: [*main, *invisible]}}
                state == urgent:    {string: {<<: [*main, *urgent]}}
          surfing:
            map:
              conditions:
                state == focused: {string: {<<: [*surfing, *focused]}}
                state == unfocused: {string: {<<: *surfing}}
                state == invisible: {string: {<<: [*surfing, *invisible]}}
                state == urgent:    {string: {<<: [*surfing, *urgent]}}
          misc:
            map:
              conditions:
                state == focused: {string: {<<: [*misc, *focused]}}
                state == unfocused: {string: {<<: *misc}}
                state == invisible: {string: {<<: [*misc, *invisible]}}
                state == urgent:    {string: {<<: [*misc, *urgent]}}

          mail:
            map:
              conditions:
                state == focused: {string: {<<: [*mail, *focused]}}
                state == unfocused: {string: {<<: *mail}}
                state == invisible: {string: {<<: [*mail, *invisible]}}
                state == urgent:    {string: {<<: [*mail, *urgent]}}
          music:
            map:
              conditions:
                state == focused: {string: {<<: [*music, *focused]}}
                state == unfocused: {string: {<<: *music}}
                state == invisible: {string: {<<: [*music, *invisible]}}
                state == urgent:    {string: {<<: [*music, *urgent]}}


  right:
    - pulse:
        foreground: 'AF87FFFF'
        content:
          - map:
              conditions:
                ~source_muted:
                  - string: {text: "\uF130 ", <<: *icon}
                  - string: {text: "{sink_percent}%"}
                source_muted:
                  - string: {text: "\uF131 ", <<: *icon}
                  - string: {text: "{sink_percent}%", foreground: 'FF206FFF'}
    # - script:
    #     path: /home/anderson/.config/yambar/pulse/pulse
    #     foreground: 'AF87FFFF'
    #     content:
    #       - map:
    #           conditions:
    #             source_muted:
    #               - string: {text: "\uF131", <<: *icon, foreground: 'FF206FFF'}
    #               - string: {text: "Mic muted ", foreground: 'FF206FFF'}
    #             ~source_muted:
    #               - string: {text: "\uF130", <<: *icon}
    #       - map:
    #           conditions:
    #             headset:
    #               - string: {text: "\uF7CA", <<: *icon}
    #             ~headset:
    #               - string: {text: "\uF886", <<: *icon}
    #       - string: {text: "{volume}%"}
    - script:
        path: /home/anderson/.config/yambar/mem.sh
        foreground: 'BFFF00FF'
        content:
          map:
            conditions:
              high:
                - string: {text: "{bar}", foreground: 'FF206FFF'}
                - string: {text: " {value}%", foreground: 'FF206FFF'}
              ~high:
                - string: {text: "{bar}"}
                - string: {text: " {value}%"}
    - script:
        path: /home/anderson/.config/yambar/percpu.sh
        foreground: '5FD7FFFF'
        content:
          map:
            conditions:
              high:
                - string: {text: "{bar}", foreground: 'FF206FFF'}
                - string: {text: " {value}%", foreground: 'FF206FFF'}
              ~high:
                - string: {text: "{bar}"}
                - string: {text: " {value}%"}
    - script:
        path: /home/anderson/.config/yambar/temp.sh
        foreground: '5FD7FFFF'
        content:
          - string: {text: "{temp}\u00B0C"}
    - removables:
        content:
          map:
            conditions:
              mounted:
                string:
                  on-click: sh -c 'notify-send "{device}" "`udisksctl mount -b {device}`"'
                  text: "\uF0C7 {label}"
                  foreground: FFD787FF
              ~mounted:
                string:
                  on-click: sh -c 'notify-send "{device}" "`udisksctl unmount -b {device}`"'
                  text: "\uF62B {label}"
                  foreground: BFFF00FF
                  # deco: {underline: {size: 1, color: BFFF00FF}}
    # - script:
    #     path: /home/anderson/.config/yambar/networkmanager/networkmanager
    #     content:
    #       - map:
    #           conditions:
    #             state == disconnected:
    #               - string: {text: "\uF4AD", <<: *icon, foreground: "FF005FFF"}
    #               - string: {text: " offline", foreground: "FF005FFF"}
    #             state == changing:
    #               - string: {text: "\uF254", <<: *icon, foreground: "5FD7FFFF"}
    #               - string: {text: " {network}", foreground: "5FD7FFFF"}
    #             state == connected:
    #               - string: {text: "\U000F08FA", <<: *icon, foreground: "5FD7FFFF"}
    #               - string: {text: " {network}", foreground: "5FD7FFFF"}
    - network:
        name: wlan0
        content:
          - map:
              conditions:
                state == down:
                  - string: {text: "\uF4AD", <<: *icon, foreground: "FF005FFF"}
                  - string: {text: " offline", foreground: "FF005FFF"}
                state == up:
                  # - string: {text: "\U000F08FA", <<: *icon, foreground: "5FD7FFFF"}
                  - ramp:
                      tag: signal
                      min: -90
                      max: -30
                      items:
                        # - string: {text: "\U000F0928", foreground: "5FD7FFFF"}
                        # - string: {text: "\U000F0925", foreground: "5FD7FFFF"}
                        # - string: {text: "\U000F0922", foreground: "5FD7FFFF"}
                        # - string: {text: "\U000F091F", foreground: "5FD7FFFF"}
                        # - string: {text: "\U000F092F", foreground: "5FD7FFFF"}
                        - string: {text: "\U000F08FE", foreground: "5FD7FFFF", <<: *icon}
                        - string: {text: "\U000F08F4", foreground: "5FD7FFFF", <<: *icon}
                        - string: {text: "\U000F08F6", foreground: "5FD7FFFF", <<: *icon}
                        - string: {text: "\U000F08F8", foreground: "5FD7FFFF", <<: *icon}
                        - string: {text: "\U000F08FA", foreground: "5FD7FFFF", <<: *icon}
                  - string: {text: " {ssid}", foreground: "5FD7FFFF"}
                default:
                  - string: {text: "\uF254", <<: *icon, foreground: "5FD7FFFF"}
                  - string: {text: " {ssid}", foreground: "5FD7FFFF"}

    # - network:
    #     name: 'wlan0'
    #     content:
    #       # - map:
    #       #     tag: state
    #       #     default:
    #       #       string: {text: 'connecting'}
    #       #     values:
    #       #       up:
    #       #         string: {text: 'up'}
    #       #       down:
    #       #         string: {text: 'down'}
    #       - map:
    #           tag: carrier
    #           values:
    #             true:
    #               - map:
    #                   tag: state
    #                   default:
    #                     string: {text: "\uF6D7 {ssid}"}
    #                   values:
    #                     up:
    #                       string: {text: "\uFAA8 {ssid}"}
    #             false:
    #               - string: {text: "\uF818 offline"}
    - clock:
        foreground: FFD787FF
        time-format: "%a %d %b %H:%M"
        content:
          - string: {text: "{time}"}
    # - cpu:
    #      poll-interval: 250
    #      foreground: '5FD7FFFF'
    #      anchors:
    #        id_all: &id_all
    #                  tag: cpu
    #                  items:
    #                    - string: {text: '、　'}
    #                    - string: {text: '。　'}
    #                    - string: {text: '〃　'}
    #                    - string: {text: '〄　'}
    #                    - string: {text: '々　'}
    #                    - string: {text: '〆　'}
    #                    - string: {text: '〇　'}
    #                    - string: {text: '〈　'}
    #      content:
    #        - map:
    #            conditions:
    #              id == 4 || id == 8 || id == 12:
    #                - string: {text: " "}
    #                - ramp: *id_all
    #              id >= 0:
    #                - ramp: *id_all

    - battery:
        name: BAT1
        poll-interval: 10000
        anchors:
          discharging: &discharging
            list:
              items:
                - ramp:
                    tag: capacity
                    items:
                      - string: {text: ' ', foreground: ff0000ff, <<: *icon}
                      - string: {text: ' ', foreground: ffa600ff, <<: *icon}
                      - string: {text: ' ', <<: *icon}
                      - string: {text: ' ', <<: *icon}
                      - string: {text: ' ', <<: *icon}
                      - string: {text: ' ', <<: *icon}
                      - string: {text: ' ', <<: *icon}
                      - string: {text: ' ', <<: *icon}
                      - string: {text: ' ', <<: *icon}
                      - string: {text: ' ', foreground: bfff00ff, <<: *icon}
                - string: {text: " {capacity}%"}
        content:
          map:
            conditions:
              state == unknown:
                <<: *discharging
              state == discharging:
                <<: *discharging
              state == charging: &charging
                - string: {text: '', foreground: bfff00ff, <<: *icon}
                - string: {text: " {capacity}%"}
              state == full:
                - string: {text: ' ', foreground: bfff00ff, <<: *icon}
                - string: {text: " {capacity}%"}
              state == "not charging": *charging